Website Todos
=============

- Eucharist
  - [ ] Eucharistic Prayers
    - [ ] A
    - [ ] B
    - [ ] C
    - [ ] D
    - [ ] 1
    - [ ] 2
    - [ ] A (Expansive)
    - [ ] B (Expansive)2
    - [ ] D (Expansive)
    - [ ] EOW 1
    - [ ] EOW 2
    - [ ] EOW 3
  - [ ] Eucharistic Liturgies
    - [ ] Rite 2
    - [ ] Rite 1
    - [ ] EOW
- Burial Services
  - [ ] Integrate Additional Prayers into Prayers & THanksgivings
      - [ ] EOW
      - [ ] Rite 2
      - [ ] Rite 1
- [ ] Automatically roll up text/Bible reading on mobile (but keep paragraphs)
- Disable certain UI features until WASM loads:
  - [ ] Search on hymnal page
- Bugs
  - [ ] On category pages, group headings (so e.g., BCP has sub-headers for versions in Burial, not three separate H2s)
  - [ ] Proper Preface links in Burial/Marriage
  - [ ] Choice label & Rogation/Ember collects w/ subheadings (see e.g., /readings/office/2022-05-23)
  - [ ] DOCX handle | in litanies
  - [ ] 9/21 Matthew morning psalms
  - [ ] 9/21 Matthew doubled collect
  - [ ] DOCX export should default to US letter
    - [ ] DOCX: fix weird line spacing thing?
  - [ ] P&Ts search page should filter out links that don't match
  - [ ] Vincent de Paul and Louise de
  - [ ] Initial "  " in Biblical reading verse => \t
  - [ ] Don't show Holy Day page links for days like December 31, that have neither readings nor bio
  - [ ] Collect page numbers list *last* page, not first page, of collect (if it changes mid-collect)
  - [ ] Mark Feasts of the Incarnation 
  - [ ] Improve `minimal_markdown` function in `components/document.rs` so it can actually handle * and ** in any order
- Testing
  - [ ] Set up tests for compiling actual liturgies, with snapshotted JSON versions
- [ ] Add liturgies
  - [x] Service of Light/Order of Worship for Evening
  - [ ] Rite I Office
  - [ ] Eucharistic liturgies
  - Parallels improvements
    - [ ] UI to toggle any given parallels on/off and highlight/export different things
    - [ ] remove response from all but last Text (in parallels)
    - [ ] remove label etc. from all but first doc (in parallels)
- [ ] PsalmDisplayFormat
  - [ ] Invitatory, Canticle, and Psalm
  - [ ] web view
  - [ ] docx export
  - [ ] LDF export
- [ ] Fix LFF collects with empty labels
- [ ] Rite II collects need Version::RiteII, not default (Version::BCP1979)
- [ ] Add Ember Days
- [ ] Systematic distinction between server date/current time (when rendering, either SSR or even more so SSG) and client current time/date — replaces instances where the prerendered UI accidentally assumes server time (e.g., Morning/Evening in daily readings page)
- [ ] Stored selections for certain Choices
- [ ] Lazy loading for `BiblicalCitation`s within `Choice`s
- [ ] Figure out partial hydration again
- [ ] CI/CD
- [ ] Additional library of documents
- [ ] Additional preferences
  - [ ] MP/EP: Officiant is a layperson/deacon vs. priest (absolution)
- [ ] Additional Tests
	- [ ] Does each holy day have 2 LFF collects + LFF readings?
  - [ ] Sanity check on LFF collect names
  - [ ] Correct Document representations for hymn texts; some are Text, but some are Preces or Litany, especially in Service Music
  - [ ] Lectionary/Readings page: handle special things like Vigils, multiple Christmas services, etc.
  - [ ] Calendar
    - [ ] LFF propers for holy days
      - [x] Convert lectionary
      - [x] Add to /holy-day pages
      - [ ] Add missing doubled sets (marked with *or*, like All Saints’ Day)
      - [ ] Add to summary page
      - [ ] Sort the list
      - [ ] Add page numbers within LFF
      - [ ] Add "Preface of _____"
    - [ ] Add collects to holy-day pages
  - [ ] Psalter page
  - [ ] About page
- [ ] Local preferences for...
  - [ ] Choices on Daily Readings page
  - [ ] Choice on Calendar page
- [ ] Alternative web/HTML setup (Perseus/Sycamore)
  - [x] Build compiling based on date
  - [ ] Build preferences
  - [ ] Build static category pages
  - [ ] Use these components for the HTML export
- Calendar 
  - [ ] Make sure every feast has a day name
  - [ ] Filter `holy_days` field so it doesn't include: (note, this is for purposes of display)
    - the observed day
    - the alternate day
    - a red-letter day that was displaced by a Sunday
- [ ] Heroku deployment
  - [ ] API endpoint
    - [ ] eject and serve from Perseus Warp server?
    - [ ] separate endpoints for dev/prod 
- [ ] Improvements to BiblicalCitation async loading
  - [ ] Include paragraphs/spacing
  - Bugs
    - [ ] Proverbs 8:22-30 (12/27 St. John)
    - [ ] Wisdom 4:7-15 (when?)
    - [ ] Song of Songs http://localhost:1844/en/holy-day/AgnesAndCeciliaOfRome#first-lesson
- [ ] Morning Prayer
  - [ ] Clean up internal TODO items
  - [ ] rotate `Choice`s for things like prayers for mission and daily collects?
- [x] Preferences
  - [ ] Tests (in conditions)
- [ ] Canticle Tables
  - [ ] Compile
    - [ ] Fallbacks
    - [ ] Traditional language
  - [x] Port canticle tables over from JSON
    - [ ] "Classical" tables for Rite I + Rite II
  - [ ] Actually look up canticles (cf. Psalter)
  - [ ] Tests
- [ ] Liturgies
  - [x] Compline
  - [ ] Evening Prayer
  - [ ] Build preferences/choices into liturgies
  - [ ] Add many more source citations
- [ ] Compiler additions
  - [ ] Rotate/randomize
  - [ ] In-depth compiler tests to prevent future breakage
- [ ] Rendering
  - All lookups (`SubLiturgy`, `Category`, `CanticleTableEntry`, etc.) can be drawn as info boxes
  - `SubLiturgy`
    - [ ] Compiler
- [ ] `BibleReference` to `String`
  - [ ] and TODO in `crates/psalter/lib.rs`
  - [x] Date/Day
- [ ] Lectionary tests against JS versions
  - [ ] RCL
- [ ] Calendar tests
  - [ ] Test feasts like "Eve of Trinity Sunday" etc.
- [ ] Sort and prettify various constant arrays
- [ ] Localization
  - [ ] LiturgicalWeek => color
- [x] PsalmCitation
  - [ ] Allow multiple psalters based on preferences